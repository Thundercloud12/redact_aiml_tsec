# agri_flow.yaml
name: AgriGuardLangGraph
description: AgriGuard pipeline: image -> mobilenet -> SHAP -> recommender -> LLM summarizer
nodes:
  - id: ImageInput
    type: python
    path: nodes/image_input.py
    fn: run
  - id: Preprocess
    type: python
    path: nodes/preprocess.py
    fn: run
  - id: ModelPredict
    type: python
    path: nodes/model_predict.py
    fn: run
  - id: SHAPExplain
    type: python
    path: nodes/shap_explain.py
    fn: run
  - id: RuleRecommender
    type: python
    path: nodes/recommender.py
    fn: run
  - id: LLMSummarize
    type: python
    path: nodes/llm_summarize.py
    fn: run
  - id: ReportOutput
    type: python
    path: nodes/report_output.py
    fn: run
edges:
  - from: ImageInput
    to: Preprocess
  - from: Preprocess
    to: ModelPredict
  - from: ModelPredict
    to: SHAPExplain
  - from: ModelPredict
    to: RuleRecommender
  - from: SHAPExplain
    to: LLMSummarize
  - from: RuleRecommender
    to: LLMSummarize
  - from: ModelPredict
    to: LLMSummarize
  - from: LLMSummarize
    to: ReportOutput
